#include <QtTest>
#include <QCoreApplication>

// add necessary includes here
#include "jira/jiraresponse.h"
#include "jira/jiraresponsesearch.h"
#include "jira/jiraresponseworklog.h"

class TestJiraResponse : public QObject
{
    Q_OBJECT

public:
    TestJiraResponse();
    ~TestJiraResponse();

private:
    QByteArray mCannedSearchResponse = "{\"expand\":\"names,schema\",\"startAt\":0,\"maxResults\":50,\"total\":1,\"issues\":[{\"expand\":\"operations,versionedRepresentations,editmeta,changelog,renderedFields\",\"id\":\"16821\",\"self\":\"https://combatstroke.atlassian.net/rest/api/latest/issue/16821\",\"key\":\"PD-5315\",\"fields\":{\"statuscategorychangedate\":\"2021-03-10T12:50:27.027+0100\",\"issuetype\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issuetype/10200\",\"id\":\"10200\",\"description\":\"Cercare Medical Change Request\",\"iconUrl\":\"https://combatstroke.atlassian.net/secure/viewavatar?size=medium&avatarId=10300&avatarType=issuetype\",\"name\":\"Work Package\",\"subtask\":false,\"avatarId\":10300},\"customfield_10270\":null,\"timespent\":115200,\"customfield_10271\":null,\"customfield_10273\":null,\"project\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/project/10000\",\"id\":\"10000\",\"key\":\"PD\",\"name\":\"Product development\",\"projectTypeKey\":\"software\",\"simplified\":false,\"avatarUrls\":{\"48x48\":\"https://combatstroke.atlassian.net/secure/projectavatar?pid=10000&avatarId=10713\",\"24x24\":\"https://combatstroke.atlassian.net/secure/projectavatar?size=small&s=small&pid=10000&avatarId=10713\",\"16x16\":\"https://combatstroke.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10000&avatarId=10713\",\"32x32\":\"https://combatstroke.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10000&avatarId=10713\"}},\"customfield_10274\":null,\"customfield_10230\":null,\"fixVersions\":[{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/version/10224\",\"id\":\"10224\",\"description\":\"\",\"name\":\"2021-03-01-01-app-cs-cercare\",\"archived\":false,\"released\":false,\"releaseDate\":\"2021-03-01\"}],\"customfield_10275\":null,\"customfield_10231\":[],\"customfield_10232\":null,\"aggregatetimespent\":115200,\"customfield_10276\":null,\"resolution\":null,\"customfield_10233\":null,\"customfield_10277\":null,\"customfield_10278\":null,\"customfield_10234\":null,\"customfield_10235\":null,\"customfield_10104\":\"1|i00unr:\",\"customfield_10269\":null,\"customfield_10227\":null,\"customfield_10228\":null,\"customfield_10229\":null,\"resolutiondate\":null,\"workratio\":100,\"watches\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/PD-5315/watchers\",\"watchCount\":1,\"isWatching\":true},\"lastViewed\":\"2021-03-14T12:10:05.450+0100\",\"created\":\"2021-03-01T15:20:39.128+0100\",\"customfield_10260\":null,\"customfield_10261\":null,\"customfield_10262\":null,\"customfield_10263\":null,\"customfield_10264\":null,\"customfield_10265\":null,\"customfield_10100\":null,\"customfield_10266\":null,\"customfield_10101\":null,\"customfield_10102\":null,\"customfield_10267\":null,\"customfield_10268\":null,\"customfield_10103\":[{\"id\":112,\"name\":\"2021 Wks:9,10\",\"state\":\"active\",\"boardId\":2,\"goal\":\"\",\"startDate\":\"2021-03-01T20:47:16.335Z\",\"endDate\":\"2021-03-12T20:47:00.000Z\"}],\"customfield_10258\":null,\"customfield_10259\":null,\"timeestimate\":0,\"aggregatetimeoriginalestimate\":115200,\"assignee\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=557058%3A60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"accountId\":\"557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"emailAddress\":\"boll@combatstroke.com\",\"avatarUrls\":{\"48x48\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/48\",\"24x24\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/24\",\"16x16\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/16\",\"32x32\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/32\"},\"displayName\":\"SxC3xB8ren Boll Overgaard\",\"active\":true,\"timeZone\":\"Europe/Copenhagen\",\"accountType\":\"atlassian\"},\"updated\":\"2021-03-10T12:50:51.533+0100\",\"status\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/status/10105\",\"description\":\"\",\"iconUrl\":\"https://combatstroke.atlassian.net/images/icons/statuses/generic.png\",\"name\":\"Ready for release\",\"id\":\"10105\",\"statusCategory\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/statuscategory/3\",\"id\":3,\"key\":\"done\",\"colorName\":\"green\",\"name\":\"Done\"}},\"timeoriginalestimate\":115200,\"customfield_10250\":null,\"description\":null,\"customfield_10251\":null,\"customfield_10252\":null,\"customfield_10253\":null,\"customfield_10254\":null,\"customfield_10255\":null,\"customfield_10256\":null,\"customfield_10257\":null,\"customfield_10247\":null,\"customfield_10006\":\"PD-4681\",\"customfield_10248\":null,\"customfield_10249\":null,\"customfield_10007\":{\"hasEpicLinkFieldDependency\":false,\"showField\":false,\"nonEditableReason\":{\"reason\":\"PLUGIN_LICENSE_ERROR\",\"message\":\"The Parent Link is only available to Jira Premium users.\"}},\"aggregatetimeestimate\":0,\"summary\":\"Squish monkey, week 9, 2021\",\"creator\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=557058%3A60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"accountId\":\"557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"emailAddress\":\"boll@combatstroke.com\",\"avatarUrls\":{\"48x48\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/48\",\"24x24\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/24\",\"16x16\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/16\",\"32x32\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/32\"},\"displayName\":\"SxC3xB8ren Boll Overgaard\",\"active\":true,\"timeZone\":\"Europe/Copenhagen\",\"accountType\":\"atlassian\"},\"subtasks\":[],\"customfield_10240\":null,\"customfield_10241\":null,\"aggregateprogress\":{\"progress\":115200,\"total\":115200,\"percent\":100},\"customfield_10242\":null,\"customfield_10000\":\"{}\",\"customfield_10001\":null,\"customfield_10243\":null,\"customfield_10002\":null,\"customfield_10244\":null,\"customfield_10245\":null,\"customfield_10246\":null,\"customfield_10236\":null,\"customfield_10237\":null,\"customfield_10238\":null,\"customfield_10239\":null,\"progress\":{\"progress\":115200,\"total\":115200,\"percent\":100},\"votes\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/PD-5315/votes\",\"votes\":0,\"hasVoted\":false}}}]}";
    QByteArray mCannedWorklogResponse = "{\"startAt\":0,\"maxResults\":1048576,\"total\":5,\"worklogs\":[{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/16821/worklog/19675\",\"author\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"updateAuthor\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"created\":\"2021-03-03T08:09:33.408+0100\",\"updated\":\"2021-03-03T08:09:33.408+0100\",\"started\":\"2021-03-02T08:00:00.000+0100\",\"timeSpent\":\"5h\",\"timeSpentSeconds\":18000,\"id\":\"19675\",\"issueId\":\"16821\"},{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/16821/worklog/19698\",\"author\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"updateAuthor\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"created\":\"2021-03-05T13:29:19.609+0100\",\"updated\":\"2021-03-05T13:29:19.609+0100\",\"started\":\"2021-03-03T08:00:00.000+0100\",\"timeSpent\":\"1d\",\"timeSpentSeconds\":28800,\"id\":\"19698\",\"issueId\":\"16821\"},{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/16821/worklog/19699\",\"author\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"updateAuthor\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"created\":\"2021-03-05T13:29:51.005+0100\",\"updated\":\"2021-03-05T13:29:51.005+0100\",\"started\":\"2021-03-04T08:00:00.000+0100\",\"timeSpent\":\"1d 1h\",\"timeSpentSeconds\":32400,\"id\":\"19699\",\"issueId\":\"16821\"},{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/16821/worklog/19700\",\"author\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"updateAuthor\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=5f7ad134287870006a25884a\",\"accountId\":\"5f7ad134287870006a25884a\",\"emailAddress\":\"angelo@cercare-medical.com\",\"avatarUrls\":{\"48x48\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"24x24\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"16x16\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\",\"32x32\":\"https://secure.gravatar.com/avatar/d6d7af3dbaa32457cffecbce6ebf2bb7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAT-2.png\"},\"displayName\":\"Angelo Torelli\",\"active\":true,\"timeZone\":\"Europe/Berlin\",\"accountType\":\"atlassian\"},\"created\":\"2021-03-05T13:30:22.195+0100\",\"updated\":\"2021-03-05T13:30:22.195+0100\",\"started\":\"2021-03-05T08:30:00.000+0100\",\"timeSpent\":\"3h\",\"timeSpentSeconds\":10800,\"id\":\"19700\",\"issueId\":\"16821\"},{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/issue/16821/worklog/19728\",\"author\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=557058%3A60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"accountId\":\"557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"emailAddress\":\"boll@combatstroke.com\",\"avatarUrls\":{\"48x48\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/48\",\"24x24\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/24\",\"16x16\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/16\",\"32x32\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/32\"},\"displayName\":\"S\xC3\xB8ren Boll Overgaard\",\"active\":true,\"timeZone\":\"Europe/Copenhagen\",\"accountType\":\"atlassian\"},\"updateAuthor\":{\"self\":\"https://combatstroke.atlassian.net/rest/api/2/user?accountId=557058%3A60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"accountId\":\"557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a\",\"emailAddress\":\"boll@combatstroke.com\",\"avatarUrls\":{\"48x48\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/48\",\"24x24\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/24\",\"16x16\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/16\",\"32x32\":\"https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:60fd2325-a1cb-4aab-8867-9fd89cb3a52a/95e59df2-600c-4b26-b7eb-83c68ba87615/32\"},\"displayName\":\"S\xC3\xB8ren Boll Overgaard\",\"active\":true,\"timeZone\":\"Europe/Copenhagen\",\"accountType\":\"atlassian\"},\"created\":\"2021-03-10T12:50:51.522+0100\",\"updated\":\"2021-03-10T12:50:51.522+0100\",\"started\":\"2021-03-10T05:50:45.429+0100\",\"timeSpent\":\"7h\",\"timeSpentSeconds\":25200,\"id\":\"19728\",\"issueId\":\"16821\"}]}";
private slots:
    void initTestCase();
    void cleanupTestCase();
    void test_search_subclass();
    void test_worklog_subclass();
};

TestJiraResponse::TestJiraResponse()
{

}

TestJiraResponse::~TestJiraResponse()
{
}

void TestJiraResponse::initTestCase()
{

}

void TestJiraResponse::cleanupTestCase()
{

}

void TestJiraResponse::test_search_subclass ()
{
    auto jr = new JiraResponseSearch(mCannedSearchResponse);
    QVERIFY(jr->valid());
    QList<QSharedPointer<JiraIssue>> issues = jr->issues();
    QCOMPARE(issues.length(), 1);
    QCOMPARE(issues[0]->key(), "PD-5315");
    delete jr;
}

void TestJiraResponse::test_worklog_subclass () {
    auto jr = new JiraResponseWorklog(mCannedWorklogResponse);
    QVERIFY(jr->valid());
    QList<QSharedPointer<JiraWorklog>> worklogs = jr->worklogs();
    QCOMPARE(worklogs.length(), 5);
    QCOMPARE(worklogs[0]->id(), "19675");
    QCOMPARE(worklogs[0]->timeSpentSeconds(), 18000);
    QCOMPARE(worklogs[0]->started(), QDateTime(QDate(2021, 3, 2), QTime(8, 0, 0)));
    QCOMPARE(worklogs[0]->accountId(), "5f7ad134287870006a25884a");
    QCOMPARE(worklogs[0]->emailAddress(), "angelo@cercare-medical.com");
    delete jr;
}

QTEST_MAIN(TestJiraResponse)

#include "tst_jiraresponse.moc"
